{
  "id": "repomix-safe-mixer",
  "name": "repomix-safe-mixer",
  "version": "1.0.0",
  "summary": "Safely package codebases with repomix by automatically detecting and removing hardcoded credentials before packing. Use when packaging code for distribution, creating reference ...",
  "description": "# Repomix Safe Mixer\n\n## Overview\n\nSafely package codebases with repomix by automatically detecting and removing hardcoded credentials.\n\nThis skill prevents accidental credential exposure when packaging code with repomix. It scans for hardcoded secrets (API keys, database credentials, tokens), reports findings, and ensures safe packaging.\n\n**When to use**: When packaging code with repomix for distribution, creating shareable reference packages, or whenever security concerns exist about hardcoded credentials in code.\n\n## Core Workflow\n\n### Standard Safe Packaging\n\nUse `safe_pack.py` from this skill's `scripts/` directory for the complete workflow: scan ‚Üí report ‚Üí pack.\n\n```bash\npython3 scripts/safe_pack.py <directory>\n```\n\n**What it does**:\n1. Scans directory for hardcoded credentials\n2. Reports findings with file/line details\n3. Blocks packaging if secrets found\n4. Packs with repomix only if scan is clean\n\n**Example**:\n```bash\npython3 scripts/safe_pack.py ./my-project\n```\n\n**Output if clean**:\n```\nüîç Scanning ./my-project for hardcoded secrets...\n‚úÖ No secrets detected!\nüì¶ Packing ./my-project with repomix...\n‚úÖ Packaging complete!\n   Package is safe to distribute.\n```\n\n**Output if secrets found**:\n```\nüîç Scanning ./my-project for hardcoded secrets...\n‚ö†Ô∏è  Security Scan Found 3 Potential Secrets:\n\nüî¥ supabase_url: 1 instance(s)\n   - src/client.ts:5\n     Match: https://ghyttjckzmzdxumxcixe.supabase.co\n\n‚ùå Cannot pack: Secrets detected!\n```\n\n### Options\n\n**Custom output file**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./my-project \\\n  --output package.xml\n```\n\n**With repomix config**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./my-project \\\n  --config repomix.config.json\n```\n\n**Exclude patterns from scanning**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./my-project \\\n  --exclude '.*test.*' '.*\\.example'\n```\n\n**Force pack (dangerous, skip scan)**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./my-project \\\n  --force  # ‚ö†Ô∏è NOT RECOMMENDED\n```\n\n## Standalone Secret Scanning\n\nUse `scan_secrets.py` from this skill's `scripts/` directory for scanning only (without packing).\n\n```bash\npython3 scripts/scan_secrets.py <directory>\n```\n\n**Use cases**:\n- Verify cleanup after removing credentials\n- Pre-commit security checks\n- Audit existing codebases\n\n**Example**:\n```bash\npython3 scripts/scan_secrets.py ./my-project\n```\n\n**JSON output for programmatic use**:\n```bash\npython3 scripts/scan_secrets.py \\\n  ./my-project \\\n  --json\n```\n\n**Exclude patterns**:\n```bash\npython3 scripts/scan_secrets.py \\\n  ./my-project \\\n  --exclude '.*test.*' '.*example.*' '.*SECURITY_AUDIT\\.md'\n```\n\n## Detected Secret Types\n\nThe scanner detects common credential patterns including:\n\n**Cloud Providers**:\n- AWS Access Keys (`AKIA...`)\n- Cloudflare R2 Account IDs and Access Keys\n- Supabase Project URLs and Anon Keys\n\n**API Keys**:\n- Stripe Keys (`sk_live_...`, `pk_live_...`)\n- OpenAI API Keys (`sk-...`)\n- Google Gemini API Keys (`AIza...`)\n- Generic API Keys\n\n**Authentication**:\n- JWT Tokens (`eyJ...`)\n- OAuth Client Secrets\n- Private Keys (`-----BEGIN PRIVATE KEY-----`)\n- Turnstile Keys (`0x...`)\n\nSee `references/common_secrets.md` for complete list and patterns.\n\n## Handling Detected Secrets\n\nWhen secrets are found:\n\n### Step 1: Review Findings\n\nExamine each finding to verify it's a real credential (not a placeholder or example).\n\n### Step 2: Replace with Environment Variables\n\n**Before**:\n```javascript\nconst SUPABASE_URL = \"https://ghyttjckzmzdxumxcixe.supabase.co\";\nconst API_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\";\n```\n\n**After**:\n```javascript\nconst SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL || \"https://your-project-ref.supabase.co\";\nconst API_KEY = import.meta.env.VITE_API_KEY || \"your-api-key-here\";\n\n// Validation\nif (!import.meta.env.VITE_SUPABASE_URL) {\n  console.error(\"‚ö†Ô∏è Missing VITE_SUPABASE_URL environment variable\");\n}\n```\n\n### Step 3: Create .env.example\n\n```bash\n# Example environment variables\nVITE_SUPABASE_URL=https://your-project-ref.supabase.co\nVITE_API_KEY=your-api-key-here\n\n# Instructions:\n# 1. Copy this file to .env\n# 2. Replace placeholders with real values\n# 3. Never commit .env to version control\n```\n\n### Step 4: Verify Cleanup\n\nRun scanner again to confirm secrets removed:\n```bash\npython3 scripts/scan_secrets.py ./my-project\n```\n\n### Step 5: Safe Pack\n\nOnce clean, package safely:\n```bash\npython3 scripts/safe_pack.py ./my-project\n```\n\n## Post-Exposure Actions\n\nIf credentials were already exposed (e.g., committed to git, shared publicly):\n\n1. **Rotate credentials immediately** - Generate new keys/tokens\n2. **Revoke old credentials** - Disable compromised credentials\n3. **Audit usage** - Check logs for unauthorized access\n4. **Monitor** - Set up alerts for unusual activity\n5. **Update deployment** - Deploy code with new credentials\n6. **Document incident** - Record what was exposed and actions taken\n\n## Common False Positives\n\nThe scanner skips common false positives:\n\n**Placeholders**:\n- `your-api-key`, `example-key`, `placeholder-value`\n- `<YOUR_API_KEY>`, `${API_KEY}`, `TODO: add key`\n\n**Test/Example files**:\n- Files matching `.*test.*`, `.*example.*`, `.*sample.*`\n\n**Comments**:\n- Lines starting with `//`, `#`, `/*`, `*`\n\n**Environment variable references** (correct usage):\n- `process.env.API_KEY`\n- `import.meta.env.VITE_API_KEY`\n- `Deno.env.get('API_KEY')`\n\nUse `--exclude` to skip additional patterns if needed.\n\n## Integration with Repomix\n\nThis skill works with standard repomix:\n\n**Default usage** (no config):\n```bash\npython3 scripts/safe_pack.py ./project\n```\n\n**With repomix config**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./project \\\n  --config repomix.config.json\n```\n\n**Custom output location**:\n```bash\npython3 scripts/safe_pack.py \\\n  ./project \\\n  --output ~/Downloads/package-clean.xml\n```\n\nThe skill runs repomix internally after security validation, passing through config and output options.\n\n## Example Workflows\n\n### Workflow 1: Package a Clean Project\n\n```bash\n# Scan and pack in one command\npython3 scripts/safe_pack.py \\\n  ~/workspace/my-project \\\n  --output ~/Downloads/my-project-package.xml\n```\n\n### Workflow 2: Clean and Package a Project with Secrets\n\n```bash\n# Step 1: Scan to discover secrets\npython3 scripts/scan_secrets.py ~/workspace/my-project\n\n# Step 2: Review findings and replace credentials with env vars\n# (Edit files manually or with automation)\n\n# Step 3: Verify cleanup\npython3 scripts/scan_secrets.py ~/workspace/my-project\n\n# Step 4: Package safely\npython3 scripts/safe_pack.py \\\n  ~/workspace/my-project \\\n  --output ~/Downloads/my-project-clean.xml\n```\n\n### Workflow 3: Audit Before Commit\n\n```bash\n# Pre-commit hook: scan for secrets\npython3 scripts/scan_secrets.py . --json\n\n# Exit code 1 if secrets found (blocks commit)\n# Exit code 0 if clean (allows commit)\n```\n\n## Resources\n\n**References**:\n- `references/common_secrets.md` - Complete credential pattern catalog\n\n**Scripts**:\n- `scripts/scan_secrets.py` - Standalone security scanner\n- `scripts/safe_pack.py` - Complete scan ‚Üí pack workflow\n\n**Related Skills**:\n- `repomix-unmixer` - Extracts files from repomix packages\n- `skill-creator` - Creates new Claude Code skills\n\n## Security Note\n\nThis skill detects common patterns but may not catch all credential types. Always:\n- Review findings manually\n- Rotate exposed credentials\n- Use .env.example templates\n- Validate environment variables\n- Monitor for unauthorized access\n\n**Not a replacement for**: Secret scanning in CI/CD, git history scanning, or comprehensive security audits.",
  "verticals": [
    "engineering"
  ],
  "tags": [],
  "author": {
    "name": "daymade",
    "github": "daymade"
  },
  "status": "ready",
  "verified": false,
  "visibility": "public",
  "license": "MIT",
  "links": {
    "repo": "https://github.com/daymade/claude-code-skills",
    "skill_md": "https://raw.githubusercontent.com/daymade/claude-code-skills/main/repomix-safe-mixer/SKILL.md"
  },
  "stats": {
    "stars": 154,
    "forks": 13,
    "installs": 0
  },
  "last_updated": "2026-01-07T15:30:48Z",
  "created_at": "2025-10-22T11:17:31Z",
  "meta": {
    "source": "github",
    "sourceUrl": "https://github.com/daymade/claude-code-skills/blob/main/repomix-safe-mixer/SKILL.md",
    "harvestedAt": "2026-01-07T16:59:54.890Z",
    "uniqueId": "sk_05c5e27662c3"
  }
}