{
  "id": "supabase-database",
  "name": "supabase-database",
  "version": "1.0.0",
  "summary": "Perform database operations (CRUD) on Supabase tables using the REST API. Use for querying, inserting, updating, and deleting data in your Supabase database.",
  "description": "# Supabase Database Operations\n\n## Overview\n\nThis skill provides tools for working with Supabase database tables through the REST API. Supports SELECT queries with filtering, INSERT, UPDATE, DELETE operations, and calling RPC functions.\n\n## Prerequisites\n\n**Required environment variables:**\n```bash\nexport SUPABASE_URL=\"https://your-project.supabase.co\"\nexport SUPABASE_KEY=\"your-anon-or-service-role-key\"\n```\n\n**Helper script:**\nThis skill uses the shared Supabase API helper. Make sure to source it:\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n```\n\n## Common Operations\n\n### SELECT - Query Data\n\n**Basic select all:**\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n\n# Get all rows from a table\nsupabase_get \"/rest/v1/your_table?select=*\"\n```\n\n**Select specific columns:**\n```bash\n# Get only id and name columns\nsupabase_get \"/rest/v1/users?select=id,name,email\"\n```\n\n**Filter results:**\n```bash\n# Equality filter\nsupabase_get \"/rest/v1/users?select=*&email=eq.user@example.com\"\n\n# Greater than\nsupabase_get \"/rest/v1/products?select=*&price=gt.100\"\n\n# Less than or equal\nsupabase_get \"/rest/v1/orders?select=*&quantity=lte.10\"\n\n# Pattern matching (LIKE)\nsupabase_get \"/rest/v1/users?select=*&name=like.*John*\"\n\n# In list\nsupabase_get \"/rest/v1/products?select=*&category=in.(electronics,books)\"\n\n# Is null\nsupabase_get \"/rest/v1/users?select=*&deleted_at=is.null\"\n```\n\n**Order and limit:**\n```bash\n# Order by column (ascending)\nsupabase_get \"/rest/v1/posts?select=*&order=created_at.asc\"\n\n# Order by column (descending)\nsupabase_get \"/rest/v1/posts?select=*&order=created_at.desc\"\n\n# Limit results\nsupabase_get \"/rest/v1/posts?select=*&limit=10\"\n\n# Pagination (offset)\nsupabase_get \"/rest/v1/posts?select=*&limit=10&offset=20\"\n\n# Range pagination\nsupabase_get \"/rest/v1/posts?select=*\" -H \"Range: 0-9\"\n```\n\n**Complex queries:**\n```bash\n# Multiple filters (AND)\nsupabase_get \"/rest/v1/products?select=*&category=eq.electronics&price=gt.100\"\n\n# OR filter\nsupabase_get \"/rest/v1/users?select=*&or=(status.eq.active,status.eq.pending)\"\n\n# Nested filters\nsupabase_get \"/rest/v1/users?select=*,posts(*)&posts.published=eq.true\"\n```\n\n### INSERT - Add Data\n\n**Insert single row:**\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n\nsupabase_post \"/rest/v1/users\" '{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"age\": 30\n}'\n```\n\n**Insert multiple rows:**\n```bash\nsupabase_post \"/rest/v1/users\" '[\n  {\n    \"name\": \"Alice Smith\",\n    \"email\": \"alice@example.com\"\n  },\n  {\n    \"name\": \"Bob Jones\",\n    \"email\": \"bob@example.com\"\n  }\n]'\n```\n\n**Upsert (insert or update if exists):**\n```bash\n# Use Prefer: resolution=merge-duplicates header\ncurl -s -X POST \\\n    \"${SUPABASE_URL}/rest/v1/users\" \\\n    -H \"apikey: ${SUPABASE_KEY}\" \\\n    -H \"Authorization: Bearer ${SUPABASE_KEY}\" \\\n    -H \"Content-Type: application/json\" \\\n    -H \"Prefer: resolution=merge-duplicates\" \\\n    -d '{\n      \"id\": 1,\n      \"name\": \"Updated Name\",\n      \"email\": \"updated@example.com\"\n    }'\n```\n\n### UPDATE - Modify Data\n\n**Update rows matching filter:**\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n\n# Update specific row by id\nsupabase_patch \"/rest/v1/users?id=eq.123\" '{\n  \"name\": \"Updated Name\",\n  \"email\": \"newemail@example.com\"\n}'\n\n# Update multiple rows\nsupabase_patch \"/rest/v1/products?category=eq.electronics\" '{\n  \"discount\": 10\n}'\n```\n\n### DELETE - Remove Data\n\n**Delete rows matching filter:**\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n\n# Delete specific row by id\nsupabase_delete \"/rest/v1/users?id=eq.123\"\n\n# Delete multiple rows\nsupabase_delete \"/rest/v1/logs?created_at=lt.2023-01-01\"\n```\n\n### RPC - Call Database Functions\n\n**Execute stored procedures:**\n```bash\nsource \"$(dirname \"${BASH_SOURCE[0]}\")/../../scripts/supabase-api.sh\"\n\n# Call function without parameters\nsupabase_post \"/rest/v1/rpc/function_name\" '{}'\n\n# Call function with parameters\nsupabase_post \"/rest/v1/rpc/calculate_total\" '{\n  \"user_id\": 123,\n  \"start_date\": \"2023-01-01\",\n  \"end_date\": \"2023-12-31\"\n}'\n```\n\n## Filter Operators Reference\n\n| Operator | Description | Example |\n|----------|-------------|---------|\n| `eq` | Equals | `id=eq.123` |\n| `neq` | Not equals | `status=neq.deleted` |\n| `gt` | Greater than | `age=gt.18` |\n| `gte` | Greater than or equal | `price=gte.100` |\n| `lt` | Less than | `quantity=lt.10` |\n| `lte` | Less than or equal | `score=lte.50` |\n| `like` | Pattern match (case-sensitive) | `name=like.*John*` |\n| `ilike` | Pattern match (case-insensitive) | `email=ilike.*@gmail.com` |\n| `is` | Check for exact value (null, true, false) | `deleted_at=is.null` |\n| `in` | In list | `status=in.(active,pending)` |\n| `not` | Negate a condition | `status=not.in.(deleted,banned)` |\n| `or` | Logical OR | `or=(status.eq.active,status.eq.pending)` |\n| `and` | Logical AND | `and=(age.gte.18,age.lte.65)` |\n\n## Response Formatting\n\n**Pretty print JSON (requires jq):**\n```bash\nsupabase_get \"/rest/v1/users?select=*\" | jq '.'\n```\n\n**Extract specific field:**\n```bash\n# Get just the names\nsupabase_get \"/rest/v1/users?select=name\" | jq -r '.[].name'\n```\n\n**Count results:**\n```bash\n# Add Prefer: count=exact header for total count\ncurl -s -X GET \\\n    \"${SUPABASE_URL}/rest/v1/users?select=*\" \\\n    -H \"apikey: ${SUPABASE_KEY}\" \\\n    -H \"Authorization: Bearer ${SUPABASE_KEY}\" \\\n    -H \"Prefer: count=exact\" \\\n    -I | grep -i content-range\n```\n\n## Common Patterns\n\n### Check if record exists\n```bash\nresult=$(supabase_get \"/rest/v1/users?select=id&email=eq.test@example.com\")\nif [[ \"$result\" == \"[]\" ]]; then\n    echo \"User does not exist\"\nelse\n    echo \"User exists\"\nfi\n```\n\n### Create if not exists\n```bash\n# Check first\nexisting=$(supabase_get \"/rest/v1/users?select=id&email=eq.test@example.com\")\n\nif [[ \"$existing\" == \"[]\" ]]; then\n    # Create new user\n    supabase_post \"/rest/v1/users\" '{\n        \"email\": \"test@example.com\",\n        \"name\": \"Test User\"\n    }'\n    echo \"User created\"\nelse\n    echo \"User already exists\"\nfi\n```\n\n### Batch operations\n```bash\n# Process multiple records\nids=(123 456 789)\n\nfor id in \"${ids[@]}\"; do\n    supabase_patch \"/rest/v1/users?id=eq.$id\" '{\n        \"updated_at\": \"'\"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"'\"\n    }'\ndone\n```\n\n## Error Handling\n\nThe helper script automatically handles HTTP errors and displays them. Check return codes:\n\n```bash\nif supabase_get \"/rest/v1/users?select=*\"; then\n    echo \"Query successful\"\nelse\n    echo \"Query failed\"\n    exit 1\nfi\n```\n\n## Security Notes\n\n- Use **anon key** for client-side operations (respects Row Level Security)\n- Use **service role key** for admin operations (bypasses RLS - use carefully)\n- Always apply Row Level Security policies in your Supabase dashboard\n- Never commit keys to version control\n\n## API Documentation\n\nFull Supabase REST API documentation: https://supabase.com/docs/guides/api",
  "verticals": [
    "engineering",
    "operations",
    "data"
  ],
  "tags": [],
  "author": {
    "name": "Nice-Wolf-Studio",
    "github": "Nice-Wolf-Studio"
  },
  "status": "ready",
  "verified": false,
  "visibility": "public",
  "license": "MIT",
  "links": {
    "repo": "https://github.com/Nice-Wolf-Studio/claude-code-supabase-skills",
    "skill_md": "https://raw.githubusercontent.com/Nice-Wolf-Studio/claude-code-supabase-skills/main/skills/supabase-database/SKILL.md"
  },
  "stats": {
    "stars": 7,
    "forks": 0,
    "installs": 0
  },
  "last_updated": "2026-01-02T07:56:55Z",
  "created_at": "2025-10-20T05:33:10Z",
  "meta": {
    "source": "github",
    "sourceUrl": "https://github.com/Nice-Wolf-Studio/claude-code-supabase-skills/blob/main/skills/supabase-database/SKILL.md",
    "harvestedAt": "2026-01-07T16:59:54.890Z",
    "uniqueId": "sk_90253213af3b"
  }
}