(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[487],{8715:function(e,t,r){Promise.resolve().then(r.t.bind(r,8817,23)),Promise.resolve().then(r.bind(r,8900)),Promise.resolve().then(r.bind(r,3899)),Promise.resolve().then(r.bind(r,1210)),Promise.resolve().then(r.bind(r,2557)),Promise.resolve().then(r.bind(r,6388))},8900:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var s=r(2438),n=r(9818),o=r(8574),a=r(9786),l=r(2601),i=r(8134);function d(e){var t,r,n;let{comment:o,onDelete:i,onReply:c,currentUserId:u,depth:m=0}=e,x=u===o.user_id,h=(null===(t=o.profile)||void 0===t?void 0:t.display_name)||(null===(r=o.profile)||void 0===r?void 0:r.username)||"Anonymous",p=null===(n=o.profile)||void 0===n?void 0:n.avatar_url,b=function(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):t<604800?"".concat(Math.floor(t/86400),"d ago"):e.toLocaleDateString()}(new Date(o.created_at));return(0,s.jsxs)("div",{className:"".concat(m>0?"ml-8 border-l-2 border-gray-100 pl-4":""),children:[(0,s.jsxs)("div",{className:"flex gap-3 py-3",children:[p?(0,s.jsx)("img",{src:p,alt:h,className:"w-8 h-8 rounded-full flex-shrink-0"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 text-sm font-medium flex-shrink-0",children:h.charAt(0).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"font-medium text-foreground",children:h}),(0,s.jsx)("span",{className:"text-gray-400",children:b})]}),(0,s.jsx)("p",{className:"text-gray-700 text-sm mt-1 whitespace-pre-wrap break-words",children:o.content}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,s.jsxs)("button",{onClick:()=>c(o.id),className:"inline-flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:[(0,s.jsx)(a.Z,{className:"w-3 h-3"}),"Reply"]}),x&&(0,s.jsxs)("button",{onClick:()=>i(o.id),className:"inline-flex items-center gap-1 text-xs text-red-500 hover:text-red-700",children:[(0,s.jsx)(l.Z,{className:"w-3 h-3"}),"Delete"]})]})]})]}),o.replies&&o.replies.length>0&&(0,s.jsx)("div",{className:"mt-1",children:o.replies.map(e=>(0,s.jsx)(d,{comment:e,onDelete:i,onReply:c,currentUserId:u,depth:m+1},e.id))})]})}function c(e){let{onSubmit:t,placeholder:r,buttonText:n,onCancel:a,autoFocus:l=!1}=e,[i,d]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),m=async e=>{e.preventDefault(),i.trim()&&!c&&(u(!0),await t(i.trim()),d(""),u(!1))};return(0,s.jsxs)("form",{onSubmit:m,className:"space-y-3",children:[(0,s.jsx)("textarea",{value:i,onChange:e=>d(e.target.value),placeholder:r,autoFocus:l,rows:3,className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[a&&(0,s.jsx)("button",{type:"button",onClick:a,className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:!i.trim()||c,className:"px-4 py-1.5 text-sm font-medium bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Posting...":n})]})]})}function u(e){let{skillId:t}=e,{comments:r,loading:a,addComment:l,deleteComment:u,user:m}=(0,n.MD)(t),[x,h]=(0,o.useState)(null),p=async e=>{await l(e)},b=async(e,t)=>{await l(e,t),h(null)},f=async e=>{confirm("Are you sure you want to delete this comment?")&&await u(e)},g=r.reduce((e,t)=>{var r;return e+1+((null===(r=t.replies)||void 0===r?void 0:r.length)||0)},0);return(0,s.jsxs)("div",{className:"rounded-2xl border border-border bg-white shadow-soft",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b border-border",children:(0,s.jsxs)("h3",{className:"font-semibold text-foreground flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-5 h-5"}),"Comments ",g>0&&(0,s.jsxs)("span",{className:"text-gray-400",children:["(",g,")"]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[m?(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(c,{onSubmit:p,placeholder:"Share your thoughts on this skill...",buttonText:"Post Comment"})}):(0,s.jsx)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("a",{href:"/login?next=/skill/".concat(t),className:"text-orange-600 hover:underline font-medium",children:"Sign in"})," ","to leave a comment"]})}),a?(0,s.jsx)("div",{className:"py-8 text-center text-gray-400",children:"Loading comments..."}):0===r.length?(0,s.jsx)("div",{className:"py-8 text-center text-gray-400",children:"No comments yet. Be the first to share your thoughts!"}):(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:r.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)(d,{comment:e,onDelete:f,onReply:e=>h(e),currentUserId:null==m?void 0:m.id}),x===e.id&&(0,s.jsx)("div",{className:"ml-11 mt-2 mb-4",children:(0,s.jsx)(c,{onSubmit:t=>b(t,e.id),placeholder:"Write a reply...",buttonText:"Reply",onCancel:()=>h(null),autoFocus:!0})})]},e.id))})]})]})}},3899:function(e,t,r){"use strict";r.d(t,{default:function(){return a}});var s=r(2438),n=r(9818),o=r(662);function a(e){let{skillId:t}=e,{liked:r,likesCount:a,loading:l,toggleLike:i}=(0,n.U3)(t);return(0,s.jsxs)("button",{onClick:i,disabled:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all\n        ".concat(r?"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100":"bg-gray-50 text-gray-600 border border-gray-200 hover:bg-gray-100","\n        ").concat(l?"opacity-50 cursor-not-allowed":"cursor-pointer","\n      "),children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 transition-all ".concat(r?"fill-current":"")}),(0,s.jsx)("span",{children:a})]})}},1210:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var s=r(2438),n=r(8574);let o=[{value:"broken",label:"Broken / Not Working"},{value:"outdated",label:"Outdated Information"},{value:"security",label:"Security Concern"},{value:"misleading",label:"Misleading Description"},{value:"duplicate",label:"Duplicate Skill"},{value:"spam",label:"Spam / Low Quality"},{value:"licensing",label:"Licensing Issue"},{value:"other",label:"Other"}];function a(e){let{isOpen:t,onClose:r,skillId:a,skillName:l}=e,[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[h,p]=(0,n.useState)(!1),[b,f]=(0,n.useState)(!1),[g,v]=(0,n.useState)("");if(!t)return null;let y=async e=>{e.preventDefault(),v(""),p(!0);try{let e=await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skillId:a,skillName:l,reason:i,description:c,email:m||void 0})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to submit report")}f(!0)}catch(e){v(e instanceof Error?e.message:"Something went wrong")}finally{p(!1)}},j=()=>{d(""),u(""),x(""),f(!1),v(""),r()};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:j}),(0,s.jsxs)("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Report Issue"}),(0,s.jsx)("button",{onClick:j,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"px-6 py-4",children:b?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-12 h-12 mx-auto mb-4 rounded-full bg-green-100 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Report Submitted"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Thanks for helping improve the directory. We'll review your report shortly."}),(0,s.jsx)("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-white bg-accent rounded-lg hover:bg-accent/90 transition-colors",children:"Close"})]}):(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Reporting: ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:l})]}),g&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-lg",children:g}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"reason",className:"block text-sm font-medium text-foreground mb-1.5",children:["Reason ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"reason",value:i,onChange:e=>d(e.target.value),required:!0,className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent",children:[(0,s.jsx)("option",{value:"",children:"Select a reason..."}),o.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"description",className:"block text-sm font-medium text-foreground mb-1.5",children:["Description ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{id:"description",value:c,onChange:e=>u(e.target.value),required:!0,rows:4,placeholder:"Please describe the issue in detail...",className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent resize-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-1.5",children:["Email ",(0,s.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,s.jsx)("input",{type:"email",id:"email",value:m,onChange:e=>x(e.target.value),placeholder:"your@email.com",className:"w-full px-3 py-2 text-sm border border-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"We'll only use this to follow up on your report if needed."})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:h||!i||!c,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Submitting...":"Submit Report"})]})]})})]})]})}function l(e){let{repoUrl:t,skillId:r,skillName:o}=e,[l,i]=(0,n.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>{t?window.open("".concat(t,"/fork"),"_blank"):alert("Fork functionality requires a repository URL.")},className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg border border-border bg-white hover:border-accent hover:text-accent transition-colors",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Fork Skill"]}),(0,s.jsxs)("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg border border-border bg-white hover:border-red-300 hover:text-red-600 transition-colors",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),"Report Issue"]})]}),(0,s.jsx)(a,{isOpen:l,onClose:()=>i(!1),skillId:r,skillName:o})]})}},2557:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var s=r(2438),n=r(8574);function o(e){let{command:t}=e,[r,o]=(0,n.useState)(!1),a=async()=>{await navigator.clipboard.writeText(t),o(!0),setTimeout(()=>o(!1),2e3)};return(0,s.jsxs)("div",{className:"rounded-lg border border-border bg-gray-50 p-3",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-2",children:"Install"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("code",{className:"flex-1 text-sm font-mono text-foreground bg-white border border-border rounded px-3 py-2 overflow-x-auto",children:t}),(0,s.jsx)("button",{onClick:a,className:"shrink-0 p-2 rounded border border-border bg-white hover:bg-gray-50 hover:border-accent transition-colors","aria-label":"Copy to clipboard",children:r?(0,s.jsx)("svg",{className:"w-4 h-4 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})}},6388:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var s=r(2438),n=r(8574),o=r(811),a=r(9768),l=r(4980);function i(e){let{description:t,skillMdContent:r,skillMdUrl:i}=e,[d,c]=(0,n.useState)("readme"),[u,m]=(0,n.useState)(r||null),[x,h]=(0,n.useState)(null),[p,b]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),j=async()=>{if(!u&&i){g(!0),y(null);try{let e=await fetch(i);if(!e.ok)throw Error("Failed to fetch SKILL.md");let t=await e.text();h(t),m(function(e){let t=e.replace(/^---\s*\n[\s\S]*?\n---\s*\n?/,"").split("\n"),r=0;for(;r<t.length&&""===t[r].trim();)r++;if(r<t.length&&/^#\s+/.test(t[r])){for(r++;r<t.length&&""===t[r].trim();)r++;r<t.length&&!t[r].startsWith("#")&&!t[r].startsWith("-")&&!t[r].startsWith("*")&&!t[r].startsWith("`")&&t[r].trim().length>0&&t[r].trim().length<200&&r++}return t.slice(r).join("\n").trim()}(t))}catch(e){y("Could not load SKILL.md")}finally{g(!1)}}},w=e=>{c(e),"skillmd"===e&&j()},N=[{id:"readme",label:"Readme"},{id:"skillmd",label:"SKILL.md",disabled:!i&&!r},{id:"versions",label:"Versions",disabled:!0}];return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex border-b border-border",children:N.map(e=>(0,s.jsxs)("button",{onClick:()=>!e.disabled&&w(e.id),disabled:e.disabled,className:(0,o.Z)("px-4 py-2.5 text-sm font-medium border-b-2 -mb-px transition-colors",d===e.id?"border-accent text-accent":"border-transparent text-gray-500 hover:text-foreground",e.disabled&&"opacity-40 cursor-not-allowed"),children:[e.label,"versions"===e.id&&(0,s.jsx)("span",{className:"ml-1 text-xs text-gray-400",children:"(soon)"})]},e.id))}),(0,s.jsxs)("div",{className:"mt-6",children:["readme"===d&&(0,s.jsx)("div",{className:"prose prose-gray max-w-none prose-headings:font-semibold prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none prose-pre:bg-gray-900 [&_pre_code]:bg-transparent [&_pre_code]:text-gray-100 [&_pre_code]:p-0",children:t?(0,s.jsx)(a.UG,{remarkPlugins:[l.Z],children:t}):(0,s.jsx)("p",{className:"text-gray-500 italic",children:"No description provided."})}),"skillmd"===d&&(0,s.jsxs)("div",{children:[f&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,s.jsxs)("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading SKILL.md..."]}),v&&(0,s.jsx)("p",{className:"text-red-600",children:v}),u&&!f&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"flex justify-end mb-3",children:(0,s.jsx)("button",{onClick:()=>b(!p),className:(0,o.Z)("text-xs px-3 py-1.5 rounded-md border transition-colors",p?"bg-accent text-white border-accent":"bg-white text-gray-600 border-border hover:border-accent hover:text-accent"),children:p?"View rendered":"View raw"})}),p?(0,s.jsx)("pre",{className:"bg-gray-50 border border-border rounded-lg p-4 overflow-x-auto text-sm font-mono whitespace-pre-wrap text-gray-700",children:x}):(0,s.jsx)("div",{className:"prose prose-gray max-w-none prose-headings:font-semibold prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none prose-pre:bg-gray-900 [&_pre_code]:bg-transparent [&_pre_code]:text-gray-100 [&_pre_code]:p-0",children:(0,s.jsx)(a.UG,{remarkPlugins:[l.Z],children:u})})]})]}),"versions"===d&&(0,s.jsx)("p",{className:"text-gray-500 italic",children:"Version history coming soon."})]})]})}},9818:function(e,t,r){"use strict";r.d(t,{MD:function(){return l},U3:function(){return a},aF:function(){return o}});var s=r(1781),n=r(8574);function o(){let[e,t]=(0,n.useState)(null),[r,o]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=(0,s.e)();e.auth.getUser().then(e=>{let{data:{user:r}}=e;t(r),o(!1)});let{data:{subscription:r}}=e.auth.onAuthStateChange((e,r)=>{var s;t(null!==(s=null==r?void 0:r.user)&&void 0!==s?s:null),o(!1)});return()=>r.unsubscribe()},[]),{user:e,loading:r,signOut:async()=>{let e=(0,s.e)();await e.auth.signOut(),t(null)}}}function a(e){let{user:t}=o(),[r,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)(0),[d,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{let r=(0,s.e)(),{count:n}=await r.from("likes").select("*",{count:"exact",head:!0}).eq("skill_id",e);if(i(n||0),t){let{data:s}=await r.from("likes").select("id").eq("skill_id",e).eq("user_id",t.id).single();a(!!s)}else a(!1);c(!1)})()},[e,t]);let u=(0,n.useCallback)(async()=>{if(!t){window.location.href="/login?next=".concat(encodeURIComponent(window.location.pathname));return}let n=(0,s.e)();r?(await n.from("likes").delete().eq("skill_id",e).eq("user_id",t.id),a(!1),i(e=>e-1)):(await n.from("likes").insert({skill_id:e,user_id:t.id}),a(!0),i(e=>e+1))},[r,e,t]);return{liked:r,likesCount:l,loading:d,toggleLike:u}}function l(e){let{user:t}=o(),[r,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),d=(0,n.useCallback)(async()=>{let t=(0,s.e)(),{data:r,error:n}=await t.from("comments").select("\n        id,\n        content,\n        created_at,\n        user_id,\n        parent_id,\n        profile:profiles(username, display_name, avatar_url)\n      ").eq("skill_id",e).order("created_at",{ascending:!0});if(n){console.error("Error fetching comments:",n);return}let o=new Map,l=[];null==r||r.forEach(e=>{let t={...e,profile:Array.isArray(e.profile)?e.profile[0]:e.profile,replies:[]};o.set(t.id,t)}),o.forEach(e=>{if(e.parent_id){let t=o.get(e.parent_id);t&&(t.replies=t.replies||[],t.replies.push(e))}else l.push(e)}),a(l),i(!1)},[e]);return(0,n.useEffect)(()=>{d()},[d]),{comments:r,loading:l,addComment:(0,n.useCallback)(async(r,n)=>{if(!t)return window.location.href="/login?next=".concat(encodeURIComponent(window.location.pathname)),null;let o=(0,s.e)(),{data:a,error:l}=await o.from("comments").insert({skill_id:e,user_id:t.id,content:r,parent_id:n||null}).select("\n        id,\n        content,\n        created_at,\n        user_id,\n        parent_id,\n        profile:profiles(username, display_name, avatar_url)\n      ").single();return l?(console.error("Error adding comment:",l),null):(await d(),a)},[e,t,d]),deleteComment:(0,n.useCallback)(async e=>{if(!t)return!1;let r=(0,s.e)(),{error:n}=await r.from("comments").delete().eq("id",e).eq("user_id",t.id);return n?(console.error("Error deleting comment:",n),!1):(await d(),!0)},[t,d]),user:t}}},1781:function(e,t,r){"use strict";r.d(t,{e:function(){return n}});var s=r(9555);function n(){return(0,s.createBrowserClient)("https://xrqahuxqqegogjwuocjl.supabase.co\n","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhycWFodXhxcWVnb2dqd3VvY2psIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0ODUxNzgsImV4cCI6MjA4MzA2MTE3OH0.TMBjaSnwgFZt1lXbZocOkA6qComKqBsPhsvlJC9eWe8\n")}}},function(e){e.O(0,[817,555,613,387,770,744],function(){return e(e.s=8715)}),_N_E=e.O()}]);